{% extends 'main/base.html' %}
{% load custom_filters %}

{% block content %}
    <div id="content" class="12u(mobile)">

        <article class="box post">
            <header>
                <h2 class="section-header">{{ chosen_cat_name }}</h2>
            </header>
        </article>
        <!-- Post -->
        {% for p in cat_posts_paginated %}
            <article class="box post c-post">
                <a href="{% url 'main:articles' post_id=p.id %}" class="image featured c-post__img">
                    <img src="{{ p.image.image.url }}" alt=""/>
                </a>
                <header class="c-post__head">
                    <h2><a href="{% url 'main:articles' post_id=p.id %}">{{ p.title|trunc:8 }}</a></h2>
                </header>
                <div class="c-post__desc">{{ p.text|trunc:45 }}</div>
                <ul class="actions c-post__view">
                    <li><a href="{% url 'main:articles' post_id=p.id %}" class="c-btn c-btn--secondary">Διαβαστε περισσοτερα</a></li>
                </ul>
            </article>
        {% endfor %}
    </div>
{% endblock%}

{% block pagination %}
    {% if not cat_posts_paginated.paginator.num_pages == 1 %}
        <section>
            <!--TODO: add this to css file -->
            <h2 style="text-transform:none;">Επόμενες Σελίδες</h2>
            <nav role="navigation">
                <ul class="cd-pagination no-space custom-buttons">
                    {% if not cat_posts_paginated.has_previous %}
                        <li class="button"><a class="disabled" href="#">Prev</a></li>
                        <li><a class="current" href="#">1</a></li>
                        <li><span>...</span></li>
                        <li><a href="?page={{ cat_posts_paginated.paginator.num_pages }}">{{ cat_posts_paginated.paginator.num_pages }}</a></li>
                        <li class="button"><a href="?page={{ cat_posts_paginated.next_page_number }}">Next</a></li>
                    {% else %}
                        <li class="button"><a href="?page={{ cat_posts_paginated.previous_page_number }}">Prev</a></li>
                        <li><a href="?page=1">1</a></li>
                        {% if not cat_posts_paginated.number == 2 %}<li><span>...</span></li> {% endif %}        
                        <li><a class="current" href="?page={{ cat_posts_paginated.number }}">{{ cat_posts_paginated.number }}</a></li>
                        {% if cat_posts_paginated.has_next %}
                            {% if not cat_posts_paginated.next_page_number == cat_posts_paginated.paginator.num_pages %}<li><span>...</span></li> {% endif %}
                            <li><a href="?page={{ cat_posts_paginated.paginator.num_pages }}">{{ cat_posts_paginated.paginator.num_pages }}</a></li>
                            <li class="button"><a href="?page={{ cat_posts_paginated.next_page_number }}">Next</a></li>    
                        {% else %}
                            <li class="button"><a class="disabled" href="#">Next</a></li>
                        {% endif %}
                    {% endif %}
                </ul>
            </nav> <!-- cd-pagination-wrapper -->
        </section>
    {% endif %}
{% endblock %}